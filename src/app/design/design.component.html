<body>
<h1>Design</h1>

<mat-card style="background-color:rgb(209, 209, 209);">

<mat-label style="font-size: large; font-weight: bold;">
  <span>Design </span>
</mat-label>
  
 
 
  <button (click)="agregarDesign()" mat-fab color="primary" aria-label="Example icon button with a delete icon">
    +
  </button>

 
  
  
<div formArrayName="design" *ngFor="let design of Desing; let i = index " >
  
  <mat-card style="background-color: rgb(204, 197, 197); margin-bottom: 2%;">
  <mat-card style="margin-bottom: 1%; background-color: rgb(207, 213, 218);">
    

    
     
       <h2>Design      </h2>
      
        <select [(ngModel)]="design.design" placeholder="Design">
            <option value="Custom">Custom/Exhaustively described</option>
            <option value="Pre-test/post-test">Pre-test/post-test control group design</option>
            <option value="solomon">Solomon four group design </option>
            <option value="control_group">Post-test only control group design </option>
            
          </select>
                 
      
      
        <h2>Description  </h2> 
        <input [(ngModel)]="design.description" placeholder="description"/> 
      </mat-card>
      
       <h2> Parameters


        <button (click)="agregarParameters(i)" mat-fab color="primary" aria-label="Example icon button with a delete icon">
          +
        </button>
      </h2>
        <mat-card style="margin-bottom: 1%; background-color: rgb(207, 213, 218);">
          
           
      <div formArrayName="parameter" *ngFor="let parameters of design.design_parameters; let p = index " >
        
        
          
          
           
             Name      
              <input [(ngModel)]="parameters.name" placeholder="Name"/>
            
            
             value      
              <input [(ngModel)]="parameters.value" placeholder="description"/>
            
            
             description      
              <input [(ngModel)]="parameters.description" placeholder="description"/>
            
            
             measure In       
                <input [(ngModel)]="parameters.measure_in" placeholder="measure_in"/>
              
              
              
              <button (click)="removerParameters(i,p)" mat-fab color="primary" aria-label="Example icon button with a delete icon"> eliminar</button>
             
            
        </div>
          
        </mat-card>

      <mat-card style="margin-bottom: 1%; background-color: rgb(207, 213, 218);">

      <h2>Random Assignment </h2>  
      <select [(ngModel)]="design.random_assignment" placeholder="random_assignment">
        <option value= true>true</option>
        <option value= false >false</option>
      </select>
     {{ design.random_assignment}}
    <div *ngIf="design.random_assignment">
    
  
    Description    of assignement
    <input [(ngModel)]="design.description_assignmentMethod" placeholder="description_assignmentMethod"/> 
    
  </div>

  </mat-card>
  
      
       <div *ngIf = " design.design == 'Custom'">
        
<h2>Groups


    <button (click)="agregarGroups(i)" mat-fab color="primary" aria-label="Example icon button with a delete icon">
      +
    </button></h2>
    <mat-card style="margin-bottom: 1%; background-color: rgb(207, 213, 218); ">
      
    
  <div formArrayName="group" *ngFor="let group of design.groups; let g = index " >
    
    
      
      
       
         Name      
          <input [(ngModel)]="group.name" placeholder="Name"/>
        
        
         size      
          <input [(ngModel)]="group.size" placeholder="size"/>
        
        
      
          
          <button (click)="removerGroup(i,g)" mat-fab color="primary" aria-label="Example icon button with a delete icon"> eliminar</button>
         
        
  </div>
      
    </mat-card>
  </div>
    
  


  <div *ngIf = " design.design == 'Custom'">
  <h2>Protocol


    <button (click)="agregarProtocol(i)" mat-fab color="primary" aria-label="Example icon button with a delete icon">
      +
    </button></h2>
    <mat-card style="margin-bottom: 1%; background-color: rgb(207, 213, 218);">
     
  <div formArrayName="protocol" *ngFor="let protocol of design.protocols; let pr = index " >
    
    
      
      
       
         Name      
          <input [(ngModel)]="protocol.name" placeholder="Name"/>
        
        
         type      
          
          <select  [(ngModel)]="protocol.type" placeholder="type">
            <option value="Treatment">Treatment</option>
            <option value="Measurement">Measurement</option>
            <option value="Treatment_&_Measurement">Treatment & Measurement </option>
            
          </select>
        
        
         On group      
      
          <select [(ngModel)]="protocol.onGroup" placeholder="onGroup">
            <option  *ngFor="let group of design.groups; let i = index " value="{{group}}">{{group.name}} </option>
                       
          </select>
        
        

          Setting


          <button (click)="agregarSetting(i,pr)" mat-fab color="primary" aria-label="Example icon button with a delete icon">
            +
          </button>
          <mat-card style="margin-bottom: 1%; background-color: rgb(207, 213, 218);">
           
        <div formArrayName="setting" *ngFor="let setting of protocol.settings; let st = index " >
          
          
            
            
             
               Name      
                <input [(ngModel)]="setting.varName" placeholder="Name"/>
              
              
               type      
                <input [(ngModel)]="setting.varValue" placeholder="type"/>
              
              
              
            
                
                <button (click)="removerSetting(i,pr,st)" mat-fab color="primary" aria-label="Example icon button with a delete icon"> eliminar</button>
               
              
        </div>
            
          </mat-card>
      
          
          <button (click)="removerProtocol(i,pr)" mat-fab color="primary" aria-label="Example icon button with a delete icon"> eliminar</button>
         
        
  </div>
      
    </mat-card>
  </div>

  <div *ngIf = " design.design == 'Custom'">
  <h2> Bloquing Variables  {{ Variables?.length}}



    <button (click)="agregarBloquingVars(i)" mat-fab color="primary" aria-label="Example icon button with a delete icon">
      +
    </button> 
</h2>

    <mat-card style="margin-bottom: 1%; background-color: rgb(207, 213, 218);">
    
  <div formArrayName="var" *ngFor="let bloquingVar of design.BloquingVars; let bv = index " >
    
    
      
      
    <select [(ngModel)]="bloquingVar.name" placeholder="description">
        <option  *ngFor="let variable of Variables; let i = index " value="{{variable.name}}">{{variable.name}}   </option>
      
                   
      </select>
    
      
          
          <button (click)="removerVars(i,bv)" mat-fab color="primary" aria-label="Example icon button with a delete icon"> eliminar</button>
         
        
  </div>
    </mat-card>
  </div>
  
  


  
    
    
  
    
    <button (click)="removerDesign(i)" mat-fab color="primary" aria-label="Example icon button with a delete icon" style="margin-left: 40%;"> eliminar</button>
   
  
    
  </mat-card>
  
</div>


  
    <button  style="margin-left: 50%" (click)="guardar(Desing)"> GUARDAR</button>
  



  



  </mat-card>
</body>